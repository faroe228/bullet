!function(){"use strict";function a(){var a=this,b={mappings:{}};a.on=function(a,c,d){if(!(arguments.length<2||"string"!=typeof a||"function"!=typeof c)){var e=c.toString();"undefined"!=typeof b.mappings[a]?"undefined"==typeof b.mappings[a].callbacks[e]?(b.mappings[a].callbacks[e]={cb:c,once:!!d},b.mappings[a].totalCallbacks++):"boolean"==typeof d&&(b.mappings[a].callbacks[e].once=d):(b.mappings[a]={callbacks:{}},b.mappings[a].callbacks[e]={cb:c,once:!!d},b.mappings[a].totalCallbacks=1)}},a.once=function(b,c){a.on(b,c,!0)},a.off=function(a,c){if("string"==typeof a&&"undefined"!=typeof b.mappings[a])if("function"==typeof c){var d=c.toString(),e=b.mappings[a].callbacks[d];"undefined"!=typeof e&&(delete b.mappings[a].callbacks[d],b.mappings[a].totalCallbacks--,0===b.mappings[a].totalCallbacks&&delete b.mappings[a])}else delete b.mappings[a]},a.trigger=function(c,d){if("string"==typeof c&&"undefined"!=typeof b.mappings[c])for(var e in b.mappings[c].callbacks){var f=b.mappings[c].callbacks[e];"function"==typeof f.cb&&f.cb(d),"boolean"==typeof f.once&&f.once===!0&&a.off(c,f.cb)}},a.getEventsMap=function(){var a={};for(var c in b.mappings)a[c]=b.mappings[c];return a}}"undefined"!=typeof define&&define.amd?define(function(){return new a}):"undefined"!=typeof module&&module.exports?module.exports=new a:window.Bullet=new a}();