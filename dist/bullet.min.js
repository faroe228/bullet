!function(){"use strict";function a(){function a(a,b,c){this.message="Bullet:: ["+a+"] "+b+", but received: "+c;var d=new Error(this.message);"undefined"!=typeof d.stack&&(this.stack=d.stack)}function b(a,b,c,d){this.message="Bullet:: ["+a+"] Expected parameter - "+b+" - to be type: "+d+", but received type: "+typeof c;var e=new TypeError(this.message);"undefined"!=typeof e.stack&&(this.stack=e.stack)}function c(a){this.message="Bullet:: ["+a+"] Expected event name parameter to be longer than 0 characters";var b=new Error(this.message);"undefined"!=typeof b.stack&&(this.stack=b.stack)}function d(a,b){this.message="Bullet:: ["+a+'] Event string: "'+b+'" does not exist within the events dictionary\nPlease use the Bullet.addEventName method to add this string.';var c=new Error(this.message);"undefined"!=typeof c.stack&&(this.stack=c.stack)}function e(a,b){this.message="Bullet:: ["+a+'] Event string: "'+b+'" is not mapped to any callbacks\nPlease use the Bullet.on method to map this string to a callback.';var c=new Error(this.message);"undefined"!=typeof c.stack&&(this.stack=c.stack)}function f(a,b){for(var c in l[a].callbacks){var d=l[a].callbacks[c];"function"==typeof d.cb&&d.cb(b),"boolean"==typeof d.once&&d.once===!0&&k.off(a,d.cb)}}function g(a){var b={};for(var c in a)b[c]={cb:a[c].cb,once:a[c].once};return b}function h(a){for(var b in l[a].callbacks){var c=l[a].callbacks[b].cb;c[j].totalEvents--,0===c[j].totalEvents?delete c[j]:delete c[j][a]}}function i(){for(var a in l)h(a)}a.prototype=new Error,a.prototype.name=a.name,a.prototype.constructor=a,b.prototype=new TypeError,b.prototype.name=b.name,b.prototype.constructor=b,c.prototype=new Error,c.prototype.name=c.name,c.prototype.constructor=c,d.prototype=new Error,d.prototype.name=d.name,d.prototype.constructor=d,e.prototype=new Error,e.prototype.name=e.name,e.prototype.constructor=e;var j="__bullet_pubsub__",k=this,l={},m=!1,n=!0;k._errors={ParamCountError:a,ParamTypeError:b,EventNameLengthError:c,UndeclaredEventError:d,UnmappedEventError:e},k.events={},k._getMappings=function(){var a={};for(var b in l)a[b]={callbacks:g(l[b].callbacks),totalCallbacks:l[b].totalCallbacks};return a},k.on=function(e,f,g){if(arguments.length<2||arguments.length>3)throw new a("on","Expected between 2 and 3 parameters",arguments.length);if("string"!=typeof e)throw new b("on","event name",e,"string");if(0===e.length)throw new c("on");if(m&&"undefined"==typeof k.events[e])throw new d("on",e);if("function"!=typeof f)throw new b("on","callback",f,"function");if("undefined"!=typeof g&&"boolean"!=typeof g)throw new b("on","once",g,"boolean");var h=null;"undefined"!=typeof l[e]?("undefined"==typeof f[j]&&(f[j]={totalEvents:0}),"undefined"==typeof f[j][e]&&(h=l[e].totalCallbacks,l[e].totalCallbacks++,l[e].callbacks[h]={cb:f,once:"boolean"==typeof g?g:!1},f[j][e]=h,f[j].totalEvents++),"boolean"==typeof g&&(h=f[j][e],l[e].callbacks[h].once=g)):(l[e]={callbacks:{}},h=0,l[e].callbacks[h]={cb:f,once:!!g},l[e].totalCallbacks=1,"undefined"==typeof f[j]?(f[j]={},f[j].totalEvents=1):f[j].totalEvents++,f[j][e]=h)},k.once=function(e,f){if(2!==arguments.length)throw new a("once","Expected 2 parameters",arguments.length);if("string"!=typeof e)throw new b("once","event name",e,"string");if(0===e.length)throw new c("once");if(m&&"undefined"==typeof k.events[e])throw new d("once",e);if("function"!=typeof f)throw new b("once","callback",f,"function");k.on(e,f,!0)},k.off=function(a,e){if(0===arguments.length)return i(),void(l={});if("string"!=typeof a)throw new b("off","event name",a,"string");if(0===a.length)throw new c("off");if(m&&"undefined"==typeof k.events[a])throw new d("off",a);if("undefined"!=typeof l[a])if("function"==typeof e){var f=e[j][a],g=l[a].callbacks[f];"undefined"!=typeof g&&(delete l[a].callbacks[f],delete e[j][a],l[a].totalCallbacks--,e[j].totalEvents--,0===l[a].totalCallbacks&&delete l[a],0===e[j].totalEvents&&delete e[j])}else{if("undefined"!=typeof e)throw new b("off","callback",e,"function");h(a),delete l[a]}},k.replaceCallback=function(a,f,g,h){if("string"!=typeof a)throw new b("replaceCallback","event name",a,"string");if(0===a.length)throw new c("replaceCallback");if("undefined"==typeof l[a])throw new e("replaceCallback",a);if(m&&"undefined"==typeof k.events[a])throw new d("replaceCallback",a);if("function"!=typeof f)throw new b("replaceCallback","callback",f,"function");if("function"!=typeof g)throw new b("replaceCallback","callback",g,"function");if("undefined"!=typeof h&&"boolean"!=typeof h)throw new b("replaceCallback","once",h,"boolean");k.off(a,f),k.on(a,g,h)},k.replaceAllCallbacks=function(a,f,g){if("string"!=typeof a)throw new b("replace","event name",a,"string");if(0===a.length)throw new c("replace");if("undefined"==typeof l[a])throw new e("replace",a);if(m&&"undefined"==typeof k.events[a])throw new d("replace",a);if("function"!=typeof f)throw new b("replace","callback",f,"function");if("undefined"!=typeof g&&"boolean"!=typeof g)throw new b("replace","once",g,"boolean");k.off(a),k.on(a,f,g)},k.trigger=function(a,g){if("string"!=typeof a)throw new b("trigger","event name",a,"string");if(0===a.length)throw new c("trigger");if(m&&"undefined"==typeof k.events[a])throw new d("trigger",a);if("undefined"!=typeof l[a])n&&"undefined"!=typeof window?window.setTimeout(function(){f(a,g)},0):f(a,g);else if(m)throw new e("trigger",a)},k.addEventName=function(a){if("string"!=typeof a)throw new b("addEventName","event name",a,"string");if(0===a.length)throw new c("addEventName");k.events[a]=a},k.removeEventName=function(a){if("string"!=typeof a)throw new b("removeEventName","event name",a,"string");if(0===a.length)throw new c("removeEventName");k.events[a]&&delete k.events[a]},k.getStrictMode=function(){return m===!0?!0:!1},k.setStrictMode=function(a){if("boolean"!=typeof a)throw new b("setStrictMode","strict mode",a,"boolean");m=a},k.getTriggerAsync=function(){return n===!0?!0:!1},k.setTriggerAsync=function(a){if("boolean"!=typeof a)throw new b("setTriggerAsync","trigger async",a,"boolean");n=a}}"undefined"!=typeof define&&define.amd?define(function(){return new a}):"undefined"!=typeof module&&module.exports?module.exports=new a:window.Bullet=new a}();